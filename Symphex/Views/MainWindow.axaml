<Window xmlns="https://github.com/avaloniaui"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:vm="using:Symphex.ViewModels"
		xmlns:converters="using:Symphex.Converters"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="700"
		x:Class="Symphex.Views.MainWindow"
		x:DataType="vm:MainWindowViewModel"
		Icon="/Assets/avalonia-logo.ico"
		Title="Music Downloader - Simple and Easy"
		MinWidth="800" MinHeight="600"
		Background="#000000">

	<Design.DataContext>
		<vm:MainWindowViewModel/>
	</Design.DataContext>

	<Window.Styles>
		<!-- Big Download Button -->
		<Style Selector="Button.download">
			<Setter Property="Background" Value="#1e40af"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="CornerRadius" Value="16"/>
			<Setter Property="Padding" Value="32,20"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="FontSize" Value="18"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Effect">
				<DropShadowEffect Color="#1e40af" Opacity="0.3" BlurRadius="20" OffsetX="0" OffsetY="8"/>
			</Setter>
		</Style>
		<Style Selector="Button.download:pointerover">
			<Setter Property="Background" Value="#1d4ed8"/>
			<Setter Property="RenderTransform" Value="scale(1.05) translateY(-2px)"/>
			<Setter Property="Effect">
				<DropShadowEffect Color="#1e40af" Opacity="0.4" BlurRadius="25" OffsetX="0" OffsetY="12"/>
			</Setter>
		</Style>
		<Style Selector="Button.download:pressed">
			<Setter Property="Background" Value="#1e3a8a"/>
			<Setter Property="RenderTransform" Value="scale(0.95)"/>
		</Style>

		<!-- Simple Button Style -->
		<Style Selector="Button.simple">
			<Setter Property="Background" Value="#1a1a1a"/>
			<Setter Property="Foreground" Value="#ffffff"/>
			<Setter Property="BorderThickness" Value="2"/>
			<Setter Property="BorderBrush" Value="#404040"/>
			<Setter Property="CornerRadius" Value="12"/>
			<Setter Property="Padding" Value="20,12"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="Medium"/>
			<Setter Property="Cursor" Value="Hand"/>
		</Style>
		<Style Selector="Button.simple:pointerover">
			<Setter Property="Background" Value="#2a2a2a"/>
			<Setter Property="BorderBrush" Value="#606060"/>
			<Setter Property="RenderTransform" Value="translateY(-1px)"/>
		</Style>

		<!-- Large Input Style -->
		<Style Selector="TextBox.large">
			<Setter Property="Background" Value="#1a1a1a"/>
			<Setter Property="BorderBrush" Value="#404040"/>
			<Setter Property="BorderThickness" Value="2"/>
			<Setter Property="CornerRadius" Value="16"/>
			<Setter Property="Padding" Value="20,16"/>
			<Setter Property="FontSize" Value="16"/>
			<Setter Property="Foreground" Value="#ffffff"/>
			<Setter Property="CaretBrush" Value="#3b82f6"/>
			<Setter Property="SelectionBrush" Value="#3b82f640"/>
		</Style>
		<Style Selector="TextBox.large:focus /template/ Border#PART_BorderElement">
			<Setter Property="BorderBrush" Value="#3b82f6"/>
			<Setter Property="Effect">
				<DropShadowEffect Color="#3b82f6" Opacity="0.25" BlurRadius="15" OffsetX="0" OffsetY="0"/>
			</Setter>
		</Style>

		<!-- Card Style -->
		<Style Selector="Border.card">
			<Setter Property="Background" Value="#111111"/>
			<Setter Property="CornerRadius" Value="20"/>
			<Setter Property="Effect">
				<DropShadowEffect Color="Black" Opacity="0.5" BlurRadius="25" OffsetX="0" OffsetY="8"/>
			</Setter>
		</Style>

		<!-- Success Card -->
		<Style Selector="Border.success">
			<Setter Property="Background" Value="#001122"/>
			<Setter Property="BorderBrush" Value="#3b82f6"/>
			<Setter Property="BorderThickness" Value="2"/>
			<Setter Property="CornerRadius" Value="16"/>
		</Style>

		<!-- Status Card -->
		<Style Selector="Border.status">
			<Setter Property="Background" Value="#1a1a1a"/>
			<Setter Property="BorderBrush" Value="#404040"/>
			<Setter Property="BorderThickness" Value="2"/>
			<Setter Property="CornerRadius" Value="16"/>
		</Style>
	</Window.Styles>

	<ScrollViewer VerticalScrollBarVisibility="Auto">
		<StackPanel Margin="40" Spacing="32" MaxWidth="800">

			<!-- Header -->
			<StackPanel Spacing="16" HorizontalAlignment="Center">
				<Border Width="80" Height="80" CornerRadius="40" HorizontalAlignment="Center">
					<Border.Background>
						<LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
							<GradientStop Color="#3b82f6" Offset="0"/>
							<GradientStop Color="#2563eb" Offset="1"/>
						</LinearGradientBrush>
					</Border.Background>
					<Border.Effect>
						<DropShadowEffect Color="#3b82f6" Opacity="0.3" BlurRadius="20" OffsetX="0" OffsetY="8"/>
					</Border.Effect>
					<TextBlock Text="ðŸŽµ" FontSize="40" Foreground="White"
							   HorizontalAlignment="Center" VerticalAlignment="Center"/>
				</Border>

				<StackPanel Spacing="8" HorizontalAlignment="Center">
					<TextBlock Text="Music Downloader" FontSize="36" FontWeight="Bold"
							   Foreground="#ffffff" HorizontalAlignment="Center"/>
					<TextBlock Text="Download any song with just a link!" FontSize="18"
							   Foreground="#cccccc" HorizontalAlignment="Center"/>
				</StackPanel>
			</StackPanel>

			<!-- Main Download Section -->
			<Border Classes="card" Padding="40">
				<StackPanel Spacing="32">

					<!-- Step 1 -->
					<StackPanel Spacing="16">
						<StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
							<Border Width="32" Height="32" CornerRadius="16" Background="#3b82f6">
								<TextBlock Text="1" FontSize="18" FontWeight="Bold" Foreground="White"
										   HorizontalAlignment="Center" VerticalAlignment="Center"/>
							</Border>
							<TextBlock Text="Paste your music link here" FontSize="20" FontWeight="SemiBold"
									   Foreground="#ffffff" VerticalAlignment="Center"/>
						</StackPanel>

						<TextBox Name="UrlTextBox"
								 Text="{Binding DownloadUrl}"
								 Classes="large"
								 Watermark="Paste YouTube, Spotify, or any music link here..."
								 Height="60"/>

						<TextBlock Text="ðŸ’¡ You can paste links from YouTube, Spotify, Apple Music, and more!"
								   FontSize="14" Foreground="#999999" HorizontalAlignment="Center"/>
					</StackPanel>

					<!-- Step 2 -->
					<StackPanel Spacing="20">
						<StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
							<Border Width="32" Height="32" CornerRadius="16" Background="#3b82f6">
								<TextBlock Text="2" FontSize="18" FontWeight="Bold" Foreground="White"
										   HorizontalAlignment="Center" VerticalAlignment="Center"/>
							</Border>
							<TextBlock Text="Click the big download button!" FontSize="20" FontWeight="SemiBold"
									   Foreground="#ffffff" VerticalAlignment="Center"/>
						</StackPanel>

						<Button Content="ðŸŽµ Download My Music" Command="{Binding DownloadCommand}"
								Classes="download" HorizontalAlignment="Center"/>

						<StackPanel Orientation="Horizontal" Spacing="16" HorizontalAlignment="Center">
							<Button Content="Clear" Command="{Binding ClearCommand}" Classes="simple"/>
							<Button Content="ðŸ“ Open Downloads" Command="{Binding OpenFolderCommand}" Classes="simple"/>
						</StackPanel>
					</StackPanel>

				</StackPanel>
			</Border>

			<!-- Preview Section - Only show when something is loaded -->
			<Border Classes="card" Padding="32" IsVisible="{Binding CurrentTrack.Title, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
				<StackPanel Spacing="24">
					<TextBlock Text="ðŸ“‹ Song Preview" FontSize="24" FontWeight="Bold"
							   Foreground="#ffffff" HorizontalAlignment="Center"/>

					<!-- Song Info -->
					<Border Background="#000000" CornerRadius="16" Padding="24">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="24"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>

							<!-- Album Art -->
							<Border Grid.Column="0" Width="120" Height="120" CornerRadius="16" Background="#2a2a2a">
								<Grid>
									<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
										<TextBlock Text="ðŸŽµ" FontSize="48" Foreground="#666666"/>
										<TextBlock Text="Album Art" FontSize="12" Foreground="#999999" FontWeight="Medium"/>
									</StackPanel>
									<Image Source="{Binding CurrentTrack.AlbumArt}" Stretch="UniformToFill"/>
								</Grid>
							</Border>

							<!-- Song Details -->
							<StackPanel Grid.Column="2" VerticalAlignment="Center" Spacing="8">
								<TextBlock Text="{Binding CurrentTrack.Title, FallbackValue='Song Title'}"
										   FontSize="24" FontWeight="Bold" Foreground="#ffffff"
										   TextWrapping="Wrap"/>

								<TextBlock Text="{Binding CurrentTrack.Artist, FallbackValue='Artist Name'}"
										   FontSize="18" Foreground="#cccccc"
										   TextWrapping="Wrap"/>

								<TextBlock Text="{Binding CurrentTrack.Album}" FontSize="16" Foreground="#999999"
										   IsVisible="{Binding CurrentTrack.Album, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
										   TextWrapping="Wrap"/>

								<!-- Quality Badge -->
								<Border Background="#3b82f6" CornerRadius="20" Padding="12,6" HorizontalAlignment="Left"
										IsVisible="{Binding CurrentTrack.AlbumArt, Converter={x:Static ObjectConverters.IsNotNull}}">
									<TextBlock Text="{Binding CurrentTrack.HasRealAlbumArt, Converter={x:Static converters:BoolToAlbumArtStatusConverter.Instance}}"
											   FontSize="12" FontWeight="Bold" Foreground="White"/>
								</Border>
							</StackPanel>
						</Grid>
					</Border>

				</StackPanel>
			</Border>

			<!-- Download Progress -->
			<Border Classes="status" Padding="24" IsVisible="{Binding IsDownloading}">
				<StackPanel Spacing="16">
					<StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
						<TextBlock Text="â³" FontSize="24"/>
						<TextBlock Text="Downloading your music..." FontSize="20" FontWeight="SemiBold" Foreground="#ffffff"/>
					</StackPanel>

					<Border Background="#1a1a1a" Height="16" CornerRadius="8" Padding="2">
						<Border CornerRadius="6" HorizontalAlignment="Left" Background="#3b82f6"
								Width="{Binding DownloadProgress, Converter={x:Static converters:PercentageToWidthConverter.Instance}}">
							<Border.Effect>
								<DropShadowEffect Color="#3b82f6" Opacity="0.4" BlurRadius="8" OffsetX="0" OffsetY="0"/>
							</Border.Effect>
						</Border>
					</Border>

					<TextBlock Text="{Binding DownloadProgress, StringFormat='Progress: {0:0}%'}"
							   FontSize="16" FontWeight="SemiBold" Foreground="#ffffff" HorizontalAlignment="Center"/>
				</StackPanel>
			</Border>

			<!-- Status Messages -->
			<Border Classes="card" Padding="24" IsVisible="{Binding StatusText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
				<StackPanel Spacing="16">
					<TextBlock Text="ðŸ“ Status" FontSize="20" FontWeight="SemiBold"
							   Foreground="#ffffff" HorizontalAlignment="Center"/>

					<Border Background="#000000" CornerRadius="12" Padding="20">
						<ScrollViewer MaxHeight="150" VerticalScrollBarVisibility="Auto">
							<TextBlock Text="{Binding StatusText}" TextWrapping="Wrap" FontSize="14"
									   Foreground="#cccccc" LineHeight="24"/>
						</ScrollViewer>
					</Border>
				</StackPanel>
			</Border>

			

			<!-- Simple Footer -->
			<Border Background="#111111" CornerRadius="16" Padding="20" Margin="0,16,0,0">
				<StackPanel Spacing="8">
					<TextBlock Text="ðŸ“ Your downloads are saved to:" FontSize="14" Foreground="#999999" HorizontalAlignment="Center"/>
					<TextBlock Text="{Binding DownloadFolder}" FontSize="14" FontWeight="Medium"
							   Foreground="#cccccc" HorizontalAlignment="Center" TextTrimming="CharacterEllipsis"/>
				</StackPanel>
			</Border>

		</StackPanel>
	</ScrollViewer>
</Window>