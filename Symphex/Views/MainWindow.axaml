<Window xmlns="https://github.com/avaloniaui"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:vm="using:Symphex.ViewModels"
		xmlns:views="using:Symphex.Views"
		xmlns:converters="using:Symphex.Converters"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="700"
		x:Class="Symphex.Views.MainWindow"
		x:DataType="vm:MainWindowViewModel"
		Icon="/Assets/SymphexLogo.ico"
		Title="Music Downloader - Simple and Easy"
		
		Background="#000000">

	<Design.DataContext>
		<vm:MainWindowViewModel/>
	</Design.DataContext>

	<Window.Styles>
		
		<Style Selector="Button.download">
			<Setter Property="Background" Value="#1e40af"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="CornerRadius" Value="12"/>
			<Setter Property="Padding" Value="28,14"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="FontSize" Value="16"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Effect">
				<DropShadowEffect Color="#1e40af" Opacity="0.3" BlurRadius="15" OffsetX="0" OffsetY="5"/>
			</Setter>
		</Style>
		<Style Selector="Button.download:pointerover">
			<Setter Property="Background" Value="#1d4ed8"/>
			<Setter Property="RenderTransform" Value="scale(1.02) translateY(-1px)"/>
		</Style>
		<Style Selector="Button.download:pressed">
			<Setter Property="Background" Value="#1e3a8a"/>
			<Setter Property="RenderTransform" Value="scale(0.98)"/>
		</Style>

		<Style Selector="Button.simple">
			<Setter Property="Background" Value="#1f1f1f"/>
			<Setter Property="Foreground" Value="#ffffff"/>
			<Setter Property="BorderThickness" Value="2"/>
			<Setter Property="BorderBrush" Value="#666666"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="Padding" Value="16,8"/>
			<Setter Property="FontSize" Value="13"/>
			<Setter Property="FontWeight" Value="Medium"/>
			<Setter Property="Cursor" Value="Hand"/>
		</Style>
		<Style Selector="Button.simple:pointerover">
			<Setter Property="Background" Value="#333333"/>
			<Setter Property="BorderBrush" Value="#888888"/>
			<Setter Property="RenderTransform" Value="scale(1.02)"/>
		</Style>
		<Style Selector="Button.simple:pressed">
			<Setter Property="Background" Value="#0f0f0f"/>
			<Setter Property="RenderTransform" Value="scale(0.98)"/>
		</Style>

		<Style Selector="TextBox.large">
			<Setter Property="Background" Value="{DynamicResource TextControlBackground}"/>
			<Setter Property="BorderBrush" Value="{DynamicResource TextControlBorderBrush}"/>
			<Setter Property="BorderThickness" Value="2"/>
			<Setter Property="CornerRadius" Value="10"/>
			<Setter Property="Padding" Value="16,12"/>
			<Setter Property="FontSize" Value="15"/>
			<Setter Property="Foreground" Value="{DynamicResource TextControlForeground}"/>
			<Setter Property="FontWeight" Value="Medium"/>
			<Setter Property="CaretBrush" Value="{DynamicResource SystemAccentColor}"/>
			<Setter Property="SelectionBrush" Value="{DynamicResource TextControlSelectionHighlightColor}"/>
		</Style>
		<Style Selector="TextBox.large:focus /template/ Border#PART_BorderElement">
			<Setter Property="BorderBrush" Value="{DynamicResource SystemAccentColor}"/>
			<Setter Property="BorderThickness" Value="3"/>
		</Style>
		<Style Selector="TextBox.large:pointerover /template/ Border#PART_BorderElement">
			<Setter Property="BorderBrush" Value="{DynamicResource TextControlBorderBrushPointerOver}"/>
		</Style>
		
		<Style Selector="TextBox.large /template/ TextBlock#PART_Watermark">
			<Setter Property="Foreground" Value="{DynamicResource TextControlPlaceholderForeground}"/>
		</Style>
		<Style Selector="TextBox.large:pointerover /template/ TextBlock#PART_Watermark">
			<Setter Property="Foreground" Value="{DynamicResource TextControlPlaceholderForegroundPointerOver}"/>
		</Style>
		<Style Selector="TextBox.large:focus /template/ TextBlock#PART_Watermark">
			<Setter Property="Foreground" Value="{DynamicResource TextControlPlaceholderForegroundFocused}"/>
		</Style>

		<Style Selector="Border.card">
			<Setter Property="Background" Value="#1a1a1a"/>
			<Setter Property="CornerRadius" Value="14"/>
			<Setter Property="Effect">
				<DropShadowEffect Color="Black" Opacity="0.3" BlurRadius="15" OffsetX="0" OffsetY="4"/>
			</Setter>
		</Style>

		<Style Selector="Border.preview">
			<Setter Property="Background" Value="#151515"/>
			<Setter Property="BorderBrush" Value="#444444"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="CornerRadius" Value="14"/>
			<Setter Property="Effect">
				<DropShadowEffect Color="Black" Opacity="0.2" BlurRadius="10" OffsetX="0" OffsetY="2"/>
			</Setter>
		</Style>

		<Style Selector="Border.progress">
			<Setter Property="Background" Value="#333333"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="Height" Value="8"/>
		</Style>
	</Window.Styles>

	<Grid>
		
		<!-- History Icon Button - Top Right (left of settings) -->
		<Button HorizontalAlignment="Right" VerticalAlignment="Top"
				Margin="20,20,80,20"
				Width="50" Height="50"
				Background="#1a1a1a"
				BorderThickness="2"
				BorderBrush="#404040"
				CornerRadius="25"
				Cursor="Hand"
				ZIndex="100"
				Command="{Binding ToggleHistoryPanelCommand}"
				RenderTransformOrigin="0.5,0.5"
				Padding="0">
			<Button.IsVisible>
				<MultiBinding Converter="{x:Static converters:MultiBoolToVisibilityConverter.Instance}">
					<Binding Path="IsHistoryPanelOpen"/>
					<Binding Path="IsSettingsView"/>
				</MultiBinding>
			</Button.IsVisible>
			<Button.Styles>
				<Style Selector="Button:pointerover">
					<Setter Property="Background" Value="#2a2a2a"/>
					<Setter Property="BorderBrush" Value="#606060"/>
					<Setter Property="RenderTransform" Value="scale(1.1)"/>
				</Style>
				<Style Selector="Button:pressed">
					<Setter Property="RenderTransform" Value="scale(0.95)"/>
				</Style>
			</Button.Styles>
			<Viewbox Width="28" Height="28">
				<TextBlock Text="ðŸ“œ" TextAlignment="Center"/>
			</Viewbox>
		</Button>

		<!-- Resize Mode Toggle Button - Top Right (left of history) -->
		<Button HorizontalAlignment="Right" VerticalAlignment="Top"
				Margin="20,20,140,20"
				Width="50" Height="50"
				Background="{Binding IsResizeMode, Converter={x:Static converters:BoolToColorConverter.Instance}}"
				BorderThickness="2"
				BorderBrush="{Binding IsResizeMode, Converter={x:Static converters:BoolToBorderColorConverter.Instance}}"
				CornerRadius="25"
				Cursor="Hand"
				ZIndex="100"
				Command="{Binding ToggleResizeModeCommand}"
				RenderTransformOrigin="0.5,0.5"
				Padding="0">
			<Button.IsVisible>
				<MultiBinding Converter="{x:Static converters:MultiBoolToVisibilityConverter.Instance}">
					<Binding Path="IsHistoryPanelOpen"/>
					<Binding Path="IsSettingsView"/>
				</MultiBinding>
			</Button.IsVisible>
			<Button.Styles>
				<Style Selector="Button:pointerover">
					<Setter Property="Background" Value="#2a2a2a"/>
					<Setter Property="BorderBrush" Value="#606060"/>
					<Setter Property="RenderTransform" Value="scale(1.1)"/>
				</Style>
				<Style Selector="Button:pressed">
					<Setter Property="RenderTransform" Value="scale(0.95)"/>
				</Style>
			</Button.Styles>
			<Viewbox Width="28" Height="28">
				<TextBlock Text="ðŸŽ¨" TextAlignment="Center"/>
			</Viewbox>
		</Button>

		<!-- Settings Gear Icon Button - Top Right -->
		<Button HorizontalAlignment="Right" VerticalAlignment="Top"
				Margin="20"
				Width="50" Height="50"
				Background="#1a1a1a"
				BorderThickness="2"
				BorderBrush="#404040"
				CornerRadius="25"
				Cursor="Hand"
				ZIndex="100"
				Command="{Binding NavigateToSettingsCommand}"
				RenderTransformOrigin="0.5,0.5"
				Padding="0">
			<Button.IsVisible>
				<MultiBinding Converter="{x:Static converters:MultiBoolToVisibilityConverter.Instance}">
					<Binding Path="IsSettingsView"/>
					<Binding Path="IsHistoryPanelOpen"/>
				</MultiBinding>
			</Button.IsVisible>
			<Button.Styles>
				<Style Selector="Button:pointerover">
					<Setter Property="Background" Value="#2a2a2a"/>
					<Setter Property="BorderBrush" Value="#606060"/>
					<Setter Property="RenderTransform" Value="scale(1.1)"/>
				</Style>
				<Style Selector="Button:pressed">
					<Setter Property="RenderTransform" Value="scale(0.95)"/>
				</Style>
			</Button.Styles>
			<Viewbox Width="28" Height="28">
				<TextBlock Text="âš™ï¸" TextAlignment="Center"/>
			</Viewbox>
		</Button>

		<!-- Content Area with Navigation -->
		<ContentControl Content="{Binding CurrentView}">
			<ContentControl.DataTemplates>
				<DataTemplate DataType="vm:SettingsViewModel">
					<views:SettingsView/>
				</DataTemplate>
			</ContentControl.DataTemplates>
		</ContentControl>

		<!-- Main Download View (shown when CurrentView is null) -->
		<Grid IsVisible="{Binding CurrentView, Converter={x:Static ObjectConverters.IsNull}}">
		
		<!-- Hamburger Menu Button - Floating when closed -->
		<Button HorizontalAlignment="Left" VerticalAlignment="Top"
				Margin="20"
				Width="50" Height="50"
				Background="#1a1a1a"
				BorderThickness="2"
				BorderBrush="#404040"
				CornerRadius="25"
				Cursor="Hand"
				ZIndex="100"
				Command="{Binding ToggleSidePanelCommand}"
				IsVisible="{Binding !IsSidePanelOpen}">
			<Button.Styles>
				<Style Selector="Button:pointerover">
					<Setter Property="Background" Value="#2a2a2a"/>
					<Setter Property="BorderBrush" Value="#606060"/>
					<Setter Property="RenderTransform" Value="scale(1.1)"/>
				</Style>
				<Style Selector="Button:pressed">
					<Setter Property="RenderTransform" Value="scale(0.95)"/>
				</Style>
			</Button.Styles>
			<TextBlock Text="â˜°" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
		</Button>
		
		<!-- Side Panel for Saved Links -->
		<Border Background="#0a0a0a" 
				Width="280" 
				HorizontalAlignment="Left"
				BorderBrush="#1a1a1a"
				BorderThickness="0,0,1,0"
				ZIndex="50"
				IsVisible="{Binding IsSidePanelOpen}">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<!-- Header -->
				<Border Grid.Row="0" Background="#151515" Padding="16,12" BorderBrush="#1a1a1a" BorderThickness="0,0,0,1">
					<Grid>
						<StackPanel Spacing="12">
							<TextBlock Text="ðŸ“š Saved Links" FontSize="16" FontWeight="Bold" Foreground="#ffffff"/>
							
							<!-- Filter Buttons -->
							<StackPanel Orientation="Horizontal" Spacing="8">
								<Button Content="All" 
										Command="{Binding FilterLinksCommand}" 
										CommandParameter="All"
										Background="{Binding SelectedFilter, Converter={x:Static converters:FilterToColorConverter.Instance}, ConverterParameter=All}"
										Foreground="White"
										BorderThickness="0"
										CornerRadius="6"
										Padding="12,6"
										FontSize="11"
										Cursor="Hand"/>
								<Button Content="â˜…" 
										Command="{Binding FilterLinksCommand}" 
										CommandParameter="Favorites"
										Background="{Binding SelectedFilter, Converter={x:Static converters:FilterToColorConverter.Instance}, ConverterParameter=Favorites}"
										Foreground="White"
										BorderThickness="0"
										CornerRadius="6"
										Padding="10,6"
										FontSize="16"
										Cursor="Hand"/>
								<Button Content="Recent" 
										Command="{Binding FilterLinksCommand}" 
										CommandParameter="Recent"
										Background="{Binding SelectedFilter, Converter={x:Static converters:FilterToColorConverter.Instance}, ConverterParameter=Recent}"
										Foreground="White"
										BorderThickness="0"
										CornerRadius="6"
										Padding="12,6"
										FontSize="11"
										Cursor="Hand"/>
							</StackPanel>
						</StackPanel>
						
						<!-- Close Button -->
						<Button HorizontalAlignment="Right" VerticalAlignment="Top"
								Width="32" Height="32"
								Background="Transparent"
								BorderThickness="0"
								CornerRadius="16"
								Cursor="Hand"
								Command="{Binding ToggleSidePanelCommand}">
							<Button.Styles>
								<Style Selector="Button:pointerover">
									<Setter Property="Background" Value="#2a2a2a"/>
								</Style>
							</Button.Styles>
							<TextBlock Text="âœ•" FontSize="18" Foreground="#888888" HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Button>
					</Grid>
				</Border>

				<!-- Links List -->
				<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
					<ItemsControl ItemsSource="{Binding FilteredLinks}">
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<Border Background="#151515" 
										Margin="8,4" 
										Padding="12" 
										CornerRadius="8"
										BorderBrush="#2a2a2a"
										BorderThickness="1">
									<Border.Styles>
										<Style Selector="Border:pointerover">
											<Setter Property="Background" Value="#1a1a1a"/>
										</Style>
									</Border.Styles>
									<Grid>
										<Grid.RowDefinitions>
											<RowDefinition Height="Auto"/>
											<RowDefinition Height="Auto"/>
											<RowDefinition Height="Auto"/>
										</Grid.RowDefinitions>

										<!-- Title and Favorite -->
										<Grid Grid.Row="0" ColumnDefinitions="*,Auto">
											<TextBlock Grid.Column="0"
													   Text="{Binding Title}" 
													   FontSize="13" 
													   FontWeight="SemiBold" 
													   Foreground="#ffffff"
													   TextTrimming="CharacterEllipsis"
													   VerticalAlignment="Center"
													   Margin="0,0,8,0"/>
											<Button Grid.Column="1"
													Content="{Binding IsFavorite, Converter={x:Static converters:BoolToStarConverter.Instance}}"
													Foreground="{Binding IsFavorite, Converter={x:Static converters:BoolToStarColorConverter.Instance}}"
													Command="{Binding $parent[Window].DataContext.ToggleFavoriteCommand}"
													CommandParameter="{Binding Id}"
													Background="Transparent"
													BorderThickness="0"
													Padding="4"
													FontSize="16"
													VerticalAlignment="Center"
													Cursor="Hand">
												<Button.Styles>
													<Style Selector="Button:pointerover">
														<Setter Property="Foreground" Value="#fbbf24"/>
													</Style>
												</Button.Styles>
											</Button>
										</Grid>

										<!-- Artist -->
										<TextBlock Grid.Row="1" 
												   Text="{Binding Artist}" 
												   FontSize="11" 
												   Foreground="#888888"
												   TextTrimming="CharacterEllipsis"
												   Margin="0,2,0,0"/>

										<!-- Actions -->
										<StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
											<Button Content="ðŸ“‹ Load" 
													Command="{Binding $parent[Window].DataContext.LoadSavedLinkCommand}"
													CommandParameter="{Binding}"
													Background="#3b82f6"
													Foreground="White"
													BorderThickness="0"
													CornerRadius="6"
													Padding="8,4"
													FontSize="10"
													Cursor="Hand">
												<Button.Styles>
													<Style Selector="Button:pointerover">
														<Setter Property="Background" Value="#2563eb"/>
													</Style>
												</Button.Styles>
											</Button>
											<Button Content="ðŸ—‘ï¸" 
													Command="{Binding $parent[Window].DataContext.DeleteSavedLinkCommand}"
													CommandParameter="{Binding Id}"
													Background="#dc2626"
													Foreground="White"
													BorderThickness="0"
													CornerRadius="6"
													Padding="8,4"
													FontSize="10"
													Cursor="Hand">
												<Button.Styles>
													<Style Selector="Button:pointerover">
														<Setter Property="Background" Value="#b91c1c"/>
													</Style>
												</Button.Styles>
											</Button>
										</StackPanel>
									</Grid>
								</Border>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</ScrollViewer>

				<!-- Save Current Button -->
				<Border Grid.Row="2" Background="#151515" Padding="12" BorderBrush="#1a1a1a" BorderThickness="0,1,0,0">
					<Button Content="ðŸ’¾ Save Current Link" 
							Command="{Binding SaveCurrentLinkCommand}"
							Background="#10b981"
							Foreground="White"
							BorderThickness="0"
							CornerRadius="8"
							Padding="12,10"
							FontSize="12"
							FontWeight="SemiBold"
							HorizontalAlignment="Stretch"
							Cursor="Hand">
						<Button.Styles>
							<Style Selector="Button:pointerover">
								<Setter Property="Background" Value="#059669"/>
							</Style>
						</Button.Styles>
					</Button>
				</Border>
			</Grid>
		</Border>
		
		<!-- History Panel - Right Side -->
		<Border Background="#0a0a0a" 
				Width="320" 
				HorizontalAlignment="Right"
				BorderBrush="#1a1a1a"
				BorderThickness="1,0,0,0"
				ZIndex="50"
				IsVisible="{Binding IsHistoryPanelOpen}">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<!-- Header -->
				<Border Grid.Row="0" Background="#151515" Padding="16,12" BorderBrush="#1a1a1a" BorderThickness="0,0,0,1">
					<Grid>
						<StackPanel Spacing="12">
							<TextBlock Text="ðŸ“œ Download History" FontSize="16" FontWeight="Bold" Foreground="#ffffff"/>
							
							<!-- Search Box -->
							<TextBox Text="{Binding HistorySearchText}"
									 Watermark="Search downloads..."
									 Background="#0a0a0a"
									 Foreground="#ffffff"
									 BorderBrush="#3b82f6"
									 BorderThickness="2"
									 CornerRadius="8"
									 Padding="12,8"
									 FontSize="12"/>
						</StackPanel>
						
						<!-- Close Button -->
						<Button HorizontalAlignment="Right" VerticalAlignment="Top"
								Width="32" Height="32"
								Background="Transparent"
								BorderThickness="0"
								CornerRadius="16"
								Cursor="Hand"
								Command="{Binding ToggleHistoryPanelCommand}">
							<Button.Styles>
								<Style Selector="Button:pointerover">
									<Setter Property="Background" Value="#2a2a2a"/>
								</Style>
							</Button.Styles>
							<TextBlock Text="âœ•" FontSize="18" Foreground="#888888" HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Button>
					</Grid>
				</Border>

				<!-- History List -->
				<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
					<ItemsControl ItemsSource="{Binding FilteredHistory}">
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<Border Background="#151515" 
										Margin="8,4" 
										Padding="12" 
										CornerRadius="8"
										BorderBrush="#2a2a2a"
										BorderThickness="1">
									<Border.Styles>
										<Style Selector="Border:pointerover">
											<Setter Property="Background" Value="#1a1a1a"/>
										</Style>
									</Border.Styles>
									<StackPanel Spacing="8">
										<!-- Title -->
										<TextBlock Text="{Binding Title}" 
												   FontSize="13" 
												   FontWeight="SemiBold" 
												   Foreground="#ffffff"
												   TextWrapping="Wrap"/>

										<!-- Artist & Date -->
										<StackPanel Spacing="4">
											<TextBlock Text="{Binding Artist}" 
													   FontSize="11" 
													   Foreground="#888888"
													   TextTrimming="CharacterEllipsis"/>
											<TextBlock Text="{Binding DownloadDate, StringFormat='{}{0:MMM dd, yyyy HH:mm}'}" 
													   FontSize="10" 
													   Foreground="#666666"/>
										</StackPanel>

										<!-- Actions -->
										<StackPanel Orientation="Horizontal" Spacing="8">
											<Button Content="â–¶ï¸ Play" 
													Command="{Binding $parent[Window].DataContext.OpenHistoryFileCommand}"
													CommandParameter="{Binding FilePath}"
													Background="#10b981"
													Foreground="White"
													BorderThickness="0"
													CornerRadius="6"
													Padding="8,4"
													FontSize="10"
													Cursor="Hand">
												<Button.Styles>
													<Style Selector="Button:pointerover">
														<Setter Property="Background" Value="#059669"/>
													</Style>
												</Button.Styles>
											</Button>
											<Button Content="ðŸ—‘ï¸" 
													Command="{Binding $parent[Window].DataContext.DeleteHistoryItemCommand}"
													CommandParameter="{Binding Id}"
													Background="#dc2626"
													Foreground="White"
													BorderThickness="0"
													CornerRadius="6"
													Padding="8,4"
													FontSize="10"
													Cursor="Hand">
												<Button.Styles>
													<Style Selector="Button:pointerover">
														<Setter Property="Background" Value="#b91c1c"/>
													</Style>
												</Button.Styles>
											</Button>
										</StackPanel>
									</StackPanel>
								</Border>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</ScrollViewer>

				<!-- Clear History Button -->
				<Border Grid.Row="2" Background="#151515" Padding="12" BorderBrush="#1a1a1a" BorderThickness="0,1,0,0">
					<Button Content="ðŸ—‘ï¸ Clear All History" 
							Command="{Binding ClearHistoryCommand}"
							Background="#dc2626"
							Foreground="White"
							BorderThickness="0"
							CornerRadius="8"
							Padding="12,10"
							FontSize="12"
							FontWeight="SemiBold"
							HorizontalAlignment="Stretch"
							Cursor="Hand">
						<Button.Styles>
							<Style Selector="Button:pointerover">
								<Setter Property="Background" Value="#b91c1c"/>
							</Style>
						</Button.Styles>
					</Button>
				</Border>
			</Grid>
		</Border>
		
		<Border IsVisible="{Binding IsToastVisible}"
				HorizontalAlignment="Center"
				VerticalAlignment="Top"
				Margin="0,60,0,0"
				CornerRadius="12"
				Padding="20,12"
				ZIndex="1000">
			<Border.Background>
				<LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
					<GradientStop Color="#10b981" Offset="0"/>
					<GradientStop Color="#059669" Offset="1"/>
				</LinearGradientBrush>
			</Border.Background>
			<Border.Effect>
				<DropShadowEffect Color="Black" Opacity="0.3" BlurRadius="20" OffsetX="0" OffsetY="8"/>
			</Border.Effect>
			<StackPanel Orientation="Horizontal" Spacing="12">
				<Border Width="24" Height="24" CornerRadius="12" Background="White">
					<TextBlock Text="âœ“" FontSize="14" FontWeight="Bold"
							  Foreground="#10b981" HorizontalAlignment="Center" VerticalAlignment="Center"/>
				</Border>
				<TextBlock Text="{Binding ToastMessage}" FontSize="14" FontWeight="Medium"
						   Foreground="White" VerticalAlignment="Center" MaxWidth="400" TextWrapping="Wrap"/>
			</StackPanel>
		</Border>

		<ScrollViewer VerticalScrollBarVisibility="Auto" Padding="40">
			
			<Grid MaxWidth="800" HorizontalAlignment="Center">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="20"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="20"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<StackPanel Grid.Row="0" Spacing="8" HorizontalAlignment="Center">
					<Border Width="70" Height="70" CornerRadius="25" HorizontalAlignment="Center">
						<Border.Background>
							<LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
								<GradientStop Color="#3b82f6" Offset="0"/>
								<GradientStop Color="#2563eb" Offset="1"/>
							</LinearGradientBrush>
						</Border.Background>
						<TextBlock Text="S" FontSize="40" FontWeight="Bold" Foreground="White"
								   HorizontalAlignment="Center" VerticalAlignment="Center"/>
					</Border>

					<StackPanel Spacing="4" HorizontalAlignment="Center">
						<TextBlock Text="Music Downloader" FontSize="24" FontWeight="Bold"
								   Foreground="#ffffff" HorizontalAlignment="Center"/>
						<TextBlock Text="Download any song with just a link!" FontSize="14"
								   Foreground="#cccccc" HorizontalAlignment="Center"/>
					</StackPanel>
				</StackPanel>

				<Grid Grid.Row="2">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="20"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>

					<!-- DOWNLOAD SECTION (Left Card) -->
					<Border Grid.Column="0" Classes="card" Padding="24" MinHeight="360" Width="390">
						<StackPanel Spacing="16" VerticalAlignment="Center">
							<TextBlock Text="Download Section" FontSize="18" FontWeight="Bold"
									   Foreground="#ffffff" HorizontalAlignment="Center"/>

							<StackPanel Spacing="10" IsVisible="{Binding !IsResizeMode}">
								<TextBlock Text="Paste your music link here" FontSize="16" FontWeight="Medium"
										   Foreground="#ffffff" HorizontalAlignment="Center"/>

								<Border DragDrop.AllowDrop="True"
										Background="Transparent">
									<TextBox Name="UrlTextBox"
											 Text="{Binding DownloadUrl}"
											 Classes="large"
											 Watermark="Paste YouTube/Spotify links here (multiple links supported)..."
											 MinHeight="44"
											 MaxHeight="120"
											 Width="325"
											 FontSize="13"
											 AcceptsReturn="True"
											 AcceptsTab="False"
											 TextWrapping="Wrap"
											 VerticalContentAlignment="Top"
											 ScrollViewer.VerticalScrollBarVisibility="Auto"/>
								</Border>
							</StackPanel>

							<!-- Resize Mode Drop Zone -->
							<StackPanel Spacing="10" IsVisible="{Binding IsResizeMode}">
								<TextBlock Text="Drag and drop files or folders here" FontSize="16" FontWeight="Medium"
										   Foreground="#ffffff" HorizontalAlignment="Center"/>

								<Border DragDrop.AllowDrop="True"
										Background="#1a1a1a"
										BorderBrush="#3b82f6"
										BorderThickness="2"
										CornerRadius="10"
										Height="120"
										Width="325"
										Padding="15">
									<StackPanel Spacing="8" VerticalAlignment="Center" HorizontalAlignment="Center">
										<TextBlock Text="ðŸ“" FontSize="32" HorizontalAlignment="Center" Foreground="#3b82f6"/>
										<TextBlock Text="Drop music files or folders here" 
												   FontSize="12" 
												   Foreground="#cccccc" 
												   HorizontalAlignment="Center"
												   TextWrapping="Wrap"
												   TextAlignment="Center"/>
										<TextBlock Text="MP3, M4A, FLAC, WAV, OGG, OPUS" 
												   FontSize="10" 
												   Foreground="#999999" 
												   HorizontalAlignment="Center"/>
									</StackPanel>
								</Border>

								<!-- Queued Files List -->
								<Border Background="#1a1a1a" 
										CornerRadius="10" 
										Padding="10"
										Width="325"
										MaxHeight="80"
										IsVisible="{Binding QueuedFiles.Count}">
									<StackPanel Spacing="6">
										<StackPanel Orientation="Horizontal" Spacing="8">
											<TextBlock Text="ðŸ“‹ Queued:" FontSize="12" FontWeight="SemiBold" Foreground="#3b82f6"/>
											<TextBlock Text="{Binding QueuedFiles.Count}" FontSize="12" FontWeight="Bold" Foreground="#3b82f6"/>
										</StackPanel>
										<ScrollViewer MaxHeight="50" VerticalScrollBarVisibility="Auto">
											<ItemsControl ItemsSource="{Binding QueuedFiles}">
												<ItemsControl.ItemTemplate>
													<DataTemplate>
														<TextBlock Text="{Binding}" 
																   FontSize="9" 
																   Foreground="#888888" 
																   TextWrapping="Wrap"
																   Margin="0,1"/>
													</DataTemplate>
												</ItemsControl.ItemTemplate>
											</ItemsControl>
										</ScrollViewer>
									</StackPanel>
								</Border>
							</StackPanel>

							<StackPanel Spacing="6" IsVisible="{Binding IsDownloading}">
								<TextBlock Text="Downloading..." FontSize="14" FontWeight="Medium"
										   Foreground="#ffffff" HorizontalAlignment="Center"/>

								<Border Classes="progress" Padding="1">
									<Border CornerRadius="7" HorizontalAlignment="Left" Background="#3b82f6"
											Width="{Binding DownloadProgress, Converter={x:Static converters:PercentageToWidthConverter.Instance}}"/>
								</Border>
							</StackPanel>

							<Button Command="{Binding DownloadCommand}"
									Classes="download" HorizontalAlignment="Center">
								<Button.Content>
									<MultiBinding Converter="{x:Static converters:ResizeModeToButtonTextConverter.Instance}">
										<Binding Path="IsResizeMode"/>
									</MultiBinding>
								</Button.Content>
							</Button>

							<StackPanel Spacing="12" HorizontalAlignment="Center">
								<StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
									<Button Content="Clear" Command="{Binding ClearCommand}" Classes="simple"/>
									<Button Command="{Binding OpenFolderCommand}" Classes="simple">
										<Button.Content>
											<MultiBinding Converter="{x:Static converters:ResizeModeToOpenButtonTextConverter.Instance}">
												<Binding Path="IsResizeMode"/>
											</MultiBinding>
										</Button.Content>
									</Button>
								</StackPanel>
							</StackPanel>
						</StackPanel>
					</Border>

					<!-- SONG PREVIEW (Right Card) -->
					<Border Grid.Column="2" Classes="preview" Padding="24" MinHeight="360" Width="390">
						<StackPanel Spacing="16" Width="342">
							<TextBlock Text="Song Preview" FontSize="18" FontWeight="Bold"
									   Foreground="#ffffff" HorizontalAlignment="Center"/>

							<StackPanel Spacing="12" VerticalAlignment="Center" Height="280" Width="342">

								<StackPanel Spacing="12" HorizontalAlignment="Center" VerticalAlignment="Center"
											IsVisible="{Binding CurrentTrack.Title, Converter={x:Static StringConverters.IsNullOrEmpty}}">
									<Border Width="80" Height="80" CornerRadius="12" Background="#3a3a3a">
										<TextBlock Text="ðŸŽµ" FontSize="32" Foreground="#777777"
												   HorizontalAlignment="Center" VerticalAlignment="Center"/>
									</Border>
									<StackPanel Spacing="4">
										<TextBlock Text="No song loaded" FontSize="16" FontWeight="Medium"
												   Foreground="#888888" HorizontalAlignment="Center"/>
										<TextBlock Text="Enter a link and click download to see song details here"
												   FontSize="12" Foreground="#666666" HorizontalAlignment="Center"
												   TextWrapping="Wrap" TextAlignment="Center"/>
									</StackPanel>
								</StackPanel>

								<StackPanel Spacing="12" IsVisible="{Binding CurrentTrack.Title, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">

									<Border Width="120" 
											Height="120" 
											CornerRadius="12" 
											Background="#3a3a3a" 
											HorizontalAlignment="Center">
										<Grid>
											<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="4">
												<TextBlock Text="ðŸŽµ" FontSize="40" Foreground="#777777" HorizontalAlignment="Center"/>
												<TextBlock Text="Album Art" FontSize="10" Foreground="#888888" HorizontalAlignment="Center"/>
											</StackPanel>
											<Image Source="{Binding CurrentTrack.AlbumArt}" Stretch="UniformToFill"/>
										</Grid>
									</Border>

									<StackPanel Spacing="6">
										<TextBlock Text="{Binding CurrentTrack.Title, FallbackValue='Song Title'}"
												   FontSize="17" FontWeight="Bold" Foreground="#ffffff"
												   TextWrapping="Wrap" TextAlignment="Center" MaxLines="2"/>

										<TextBlock Text="{Binding CurrentTrack.Artist, FallbackValue='Artist Name'}"
												   FontSize="15" Foreground="#cccccc"
												   TextWrapping="Wrap" TextAlignment="Center"/>

										<TextBlock Text="{Binding CurrentTrack.Album}" FontSize="13" Foreground="#999999"
												   IsVisible="{Binding CurrentTrack.Album, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
												   TextWrapping="Wrap" TextAlignment="Center"/>

										<Border Background="#3b82f6" CornerRadius="12" Padding="8,4" HorizontalAlignment="Center" Margin="0,4,0,0"
												IsVisible="{Binding CurrentTrack.AlbumArt, Converter={x:Static ObjectConverters.IsNotNull}}">
											<TextBlock Text="{Binding CurrentTrack.HasRealAlbumArt, Converter={x:Static converters:BoolToAlbumArtStatusConverter.Instance}}"
													   FontSize="11" FontWeight="Bold" Foreground="White"/>
										</Border>

										<!-- Show artwork dimensions -->
										<TextBlock Text="{Binding ArtworkSizeInfo}"
												   FontSize="11"
												   Foreground="#666666"
												   HorizontalAlignment="Center"
												   Margin="0,4,0,0"
												   IsVisible="{Binding ArtworkSizeInfo, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
									</StackPanel>

								</StackPanel>

							</StackPanel>
						</StackPanel>
					</Border>

				</Grid>

				<Border Grid.Row="4" Background="#2a2a2a" CornerRadius="10" Padding="16,10" HorizontalAlignment="Center" MinWidth="400">
					<StackPanel Spacing="4">
						<TextBlock Text="ðŸ“ Downloads saved to:" FontSize="13" Foreground="#999999" HorizontalAlignment="Center"/>
						<TextBlock Text="{Binding DownloadFolder}" FontSize="12" FontWeight="Medium"
								   Foreground="#cccccc" HorizontalAlignment="Center" TextTrimming="CharacterEllipsis"/>
					</StackPanel>
				</Border>

			</Grid>
		</ScrollViewer>

		<!-- Artwork Selection Overlay - True overlay with ZIndex -->
		<Border Background="#EE000000" IsVisible="{Binding IsSelectingArtwork}"
				ZIndex="999"
				HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
			<StackPanel Spacing="16" VerticalAlignment="Center" HorizontalAlignment="Center">
				<StackPanel Spacing="6" HorizontalAlignment="Center">
					<TextBlock Text="ðŸŽ¨ Choose Your Artwork" FontSize="20" FontWeight="Bold"
							   Foreground="White" HorizontalAlignment="Center"/>
					<TextBlock Text="{Binding SelectionCountdown, StringFormat='Auto-selecting in {0}s...'}"
							   FontSize="13" Foreground="#FFD700" HorizontalAlignment="Center"/>
				</StackPanel>

				<!-- 4 Artwork Options in 2x2 Grid -->
				<Grid ColumnDefinitions="*,*" RowDefinitions="*,*" Width="380" Height="380">
					<!-- Option 1 -->
					<Border Grid.Row="0" Grid.Column="0" Margin="8" CornerRadius="10" 
							Background="#2a2a2a" Cursor="Hand" ClipToBounds="True"
							Tapped="OnArtworkOption1Tapped">
						<Border.Styles>
							<Style Selector="Border:pointerover">
								<Setter Property="Background" Value="#3a3a3a"/>
								<Setter Property="RenderTransform" Value="scale(1.05)"/>
							</Style>
						</Border.Styles>
						<Grid>
							<Image Source="{Binding ArtworkOptions[0]}" Stretch="UniformToFill"/>
							<!-- Number badge -->
							<Border Background="#3b82f6" Width="28" Height="28" CornerRadius="14"
									VerticalAlignment="Top" HorizontalAlignment="Right" Margin="6">
								<TextBlock Text="1" FontSize="18" FontWeight="Bold" Foreground="White"
										   TextAlignment="Center" VerticalAlignment="Center"/>
							</Border>
							<!-- Resolution label -->
							<Border Background="#000000AA" CornerRadius="6" Padding="8,4"
									VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="6">
								<TextBlock Text="{Binding ArtworkOptions[0].PixelSize, StringFormat='{}{0.Width}x{0.Height}'}"
										   FontSize="11" FontWeight="SemiBold" Foreground="White"/>
							</Border>
						</Grid>
					</Border>

					<!-- Option 2 -->
					<Border Grid.Row="0" Grid.Column="1" Margin="8" CornerRadius="10"
							Background="#2a2a2a" Cursor="Hand" ClipToBounds="True"
							Tapped="OnArtworkOption2Tapped">
						<Border.Styles>
							<Style Selector="Border:pointerover">
								<Setter Property="Background" Value="#3a3a3a"/>
								<Setter Property="RenderTransform" Value="scale(1.05)"/>
							</Style>
						</Border.Styles>
						<Grid>
							<Image Source="{Binding ArtworkOptions[1]}" Stretch="UniformToFill"/>
							<Border Background="#3b82f6" Width="28" Height="28" CornerRadius="14"
									VerticalAlignment="Top" HorizontalAlignment="Right" Margin="6">
								<TextBlock Text="2" FontSize="18" FontWeight="Bold" Foreground="White"
										   TextAlignment="Center" VerticalAlignment="Center"/>
							</Border>
							<Border Background="#000000AA" CornerRadius="6" Padding="8,4"
									VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="6">
								<TextBlock Text="{Binding ArtworkOptions[1].PixelSize, StringFormat='{}{0.Width}x{0.Height}'}"
										   FontSize="11" FontWeight="SemiBold" Foreground="White"/>
							</Border>
						</Grid>
					</Border>

					<!-- Option 3 -->
					<Border Grid.Row="1" Grid.Column="0" Margin="8" CornerRadius="10"
							Background="#2a2a2a" Cursor="Hand" ClipToBounds="True"
							Tapped="OnArtworkOption3Tapped">
						<Border.Styles>
							<Style Selector="Border:pointerover">
								<Setter Property="Background" Value="#3a3a3a"/>
								<Setter Property="RenderTransform" Value="scale(1.05)"/>
							</Style>
						</Border.Styles>
						<Grid>
							<Image Source="{Binding ArtworkOptions[2]}" Stretch="UniformToFill"/>
							<Border Background="#3b82f6" Width="28" Height="28" CornerRadius="14"
									VerticalAlignment="Top" HorizontalAlignment="Right" Margin="6">
								<TextBlock Text="3" FontSize="18" FontWeight="Bold" Foreground="White"
										   TextAlignment="Center" VerticalAlignment="Center"/>
							</Border>
							<Border Background="#000000AA" CornerRadius="6" Padding="8,4"
									VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="6">
								<TextBlock Text="{Binding ArtworkOptions[2].PixelSize, StringFormat='{}{0.Width}x{0.Height}'}"
										   FontSize="11" FontWeight="SemiBold" Foreground="White"/>
							</Border>
						</Grid>
					</Border>

					<!-- Option 4 -->
					<Border Grid.Row="1" Grid.Column="1" Margin="8" CornerRadius="10"
							Background="#2a2a2a" Cursor="Hand" ClipToBounds="True"
							Tapped="OnArtworkOption4Tapped">
						<Border.Styles>
							<Style Selector="Border:pointerover">
								<Setter Property="Background" Value="#3a3a3a"/>
								<Setter Property="RenderTransform" Value="scale(1.05)"/>
							</Style>
						</Border.Styles>
						<Grid>
							<Image Source="{Binding ArtworkOptions[3]}" Stretch="UniformToFill"/>
							<Border Background="#3b82f6" Width="28" Height="28" CornerRadius="14"
									VerticalAlignment="Top" HorizontalAlignment="Right" Margin="6">
								<TextBlock Text="4" FontSize="18" FontWeight="Bold" Foreground="White"
										   TextAlignment="Center" VerticalAlignment="Center"/>
							</Border>
							<Border Background="#000000AA" CornerRadius="6" Padding="8,4"
									VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="6">
								<TextBlock Text="{Binding ArtworkOptions[3].PixelSize, StringFormat='{}{0.Width}x{0.Height}'}"
										   FontSize="11" FontWeight="SemiBold" Foreground="White"/>
							</Border>
						</Grid>
					</Border>
				</Grid>

				<!-- Action Buttons -->
				<StackPanel Spacing="8" HorizontalAlignment="Center">
					<TextBlock Text="ðŸ’¡ Click on an image to select it" FontSize="12" Foreground="#cccccc"
							   HorizontalAlignment="Center"/>
					
					<!-- Buttons side by side -->
					<StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
						<!-- Skip Button -->
						<Button Content="â­ï¸ Skip &amp; Use Default" 
								Tapped="OnSkipArtworkSelection"
								Background="#444444" 
								Foreground="White"
								BorderThickness="0"
								CornerRadius="8"
								Padding="16,10"
								FontSize="13"
								Cursor="Hand">
							<Button.Styles>
								<Style Selector="Button:pointerover">
									<Setter Property="Background" Value="#555555"/>
								</Style>
							</Button.Styles>
						</Button>

						<!-- No Picture Button -->
						<Button Content="ðŸš« No Picture" 
								Tapped="OnNoPictureSelected"
								Background="#8B0000" 
								Foreground="White"
								BorderThickness="0"
								CornerRadius="8"
								Padding="16,10"
								FontSize="13"
								FontWeight="SemiBold"
								Cursor="Hand">
							<Button.Styles>
								<Style Selector="Button:pointerover">
									<Setter Property="Background" Value="#A52A2A"/>
								</Style>
							</Button.Styles>
						</Button>
					</StackPanel>
				</StackPanel>
			</StackPanel>
		</Border>

		</Grid>
		<!-- End of Main Download View -->

	</Grid>
</Window>