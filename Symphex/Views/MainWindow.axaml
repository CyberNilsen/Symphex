	<Window xmlns="https://github.com/avaloniaui"
			xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			xmlns:vm="using:Symphex.ViewModels"
			xmlns:converters="using:Symphex.Converters"
			xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="900"
			x:Class="Symphex.Views.MainWindow"
			x:DataType="vm:MainWindowViewModel"
			Icon="/Assets/avalonia-logo.ico"
			Title="Symphex - Music Downloader"
			MinWidth="1200" MinHeight="800"
			Background="#e8eaed">

		<Design.DataContext>
			<vm:MainWindowViewModel/>
		</Design.DataContext>

		<Window.Styles>
			<Style Selector="Button.primary">
				<Setter Property="Background" Value="#4285f4"/>
				<Setter Property="Foreground" Value="White"/>
				<Setter Property="BorderThickness" Value="0"/>
				<Setter Property="CornerRadius" Value="8"/>
				<Setter Property="Padding" Value="16,12"/>
				<Setter Property="FontWeight" Value="Medium"/>
				<Setter Property="FontSize" Value="14"/>
				<Setter Property="Transitions">
					<Transitions>
						<BrushTransition Property="Background" Duration="0:0:0.15"/>
						<TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.15"/>
					</Transitions>
				</Setter>
			</Style>
			<Style Selector="Button.primary:pointerover">
				<Setter Property="Background" Value="#3367d6"/>
				<Setter Property="RenderTransform" Value="scale(1.02)"/>
			</Style>
			<Style Selector="Button.primary:pressed">
				<Setter Property="Background" Value="#2a56c6"/>
				<Setter Property="RenderTransform" Value="scale(0.98)"/>
			</Style>

			<Style Selector="Button.secondary">
				<Setter Property="Background" Value="#4285f4"/>
				<Setter Property="Foreground" Value="White"/>
				<Setter Property="BorderThickness" Value="0"/>
				<Setter Property="CornerRadius" Value="8"/>
				<Setter Property="Padding" Value="16,12"/>
				<Setter Property="FontSize" Value="14"/>
				<Setter Property="FontWeight" Value="Medium"/>
				<Setter Property="Transitions">
					<Transitions>
						<BrushTransition Property="Background" Duration="0:0:0.15"/>
						<TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.15"/>
					</Transitions>
				</Setter>
			</Style>
			<Style Selector="Button.secondary:pointerover">
				<Setter Property="Background" Value="#3367d6"/>
				<Setter Property="RenderTransform" Value="scale(1.02)"/>
			</Style>
			<Style Selector="Button.secondary:pressed">
				<Setter Property="Background" Value="#2a56c6"/>
				<Setter Property="RenderTransform" Value="scale(0.98)"/>
			</Style>

			<Style Selector="Border.card">
				<Setter Property="Background" Value="#ffffff"/>
				<Setter Property="BorderBrush" Value="#e0e0e0"/>
				<Setter Property="BorderThickness" Value="1"/>
				<Setter Property="CornerRadius" Value="12"/>
			</Style>

			<Style Selector="TextBox.modern">
				<Setter Property="Background" Value="#ffffff"/>
				<Setter Property="BorderBrush" Value="#dadce0"/>
				<Setter Property="BorderThickness" Value="1"/>
				<Setter Property="CornerRadius" Value="8"/>
				<Setter Property="Padding" Value="14,12"/>
				<Setter Property="FontSize" Value="14"/>
				<Setter Property="Foreground" Value="#3c4043"/>
				<Setter Property="Transitions">
					<Transitions>
						<BrushTransition Property="BorderBrush" Duration="0:0:0.15"/>
						<BrushTransition Property="Background" Duration="0:0:0.15"/>
					</Transitions>
				</Setter>
			</Style>
			<Style Selector="TextBox.modern:focus /template/ Border#PART_BorderElement">
				<Setter Property="BorderBrush" Value="#4285f4"/>
			</Style>
			<Style Selector="TextBox.modern:pointerover /template/ Border#PART_BorderElement">
				<Setter Property="BorderBrush" Value="#5f6368"/>
			</Style>
		</Window.Styles>

		<Grid Margin="24">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="24"/>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="24"/>
				<RowDefinition Height="*"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>

			<Grid Grid.Row="0">
				<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
					<Border Width="52" Height="52" CornerRadius="12" Background="#4285f4" Margin="0,0,18,0">
						<TextBlock Text="♫" FontSize="26" FontWeight="Bold" Foreground="White"
								   HorizontalAlignment="Center" VerticalAlignment="Center"/>
					</Border>
					<StackPanel VerticalAlignment="Center">
						<TextBlock Text="Symphex" FontSize="28" FontWeight="Bold" Foreground="#202124"/>
						<TextBlock Text="Music Downloader with Album Art" FontSize="15" Foreground="#5f6368"/>
					</StackPanel>
				</StackPanel>
			</Grid>

			<Border Grid.Row="2" Classes="card" Padding="28">
				<StackPanel Spacing="20">
					<TextBlock Text="Enter URL or Search Query" FontSize="17" FontWeight="SemiBold" Foreground="#202124"/>

					<TextBox Name="UrlTextBox"
							 Text="{Binding DownloadUrl}"
							 Classes="modern"
							 Watermark="https://youtube.com/watch?v=... or search for any song"
							 Height="48"/>

					<StackPanel Orientation="Horizontal" Spacing="14">
						<Button Content="Download" Command="{Binding DownloadCommand}" Classes="primary"/>
						<Button Content="Get yt-dlp" Command="{Binding DownloadYtDlpCommand}" Classes="secondary"/>
						<Button Content="Get FFmpeg" Command="{Binding DownloadFfmpegCommand}" Classes="secondary"/>
						<Button Content="Check Dependencies" Command="{Binding CheckDependenciesCommand}" Classes="secondary"/>
						<Button Content="Clear" Command="{Binding ClearCommand}" Classes="secondary"/>
					</StackPanel>
				</StackPanel>
			</Border>

			<Grid Grid.Row="4">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="1*"/>
					<ColumnDefinition Width="20"/>
					<ColumnDefinition Width="1*"/>
					<ColumnDefinition Width="20"/>
					<ColumnDefinition Width="1*"/>
				</Grid.ColumnDefinitions>

				<Border Grid.Column="0" Classes="card" Padding="20">
					<StackPanel Spacing="16">
						<TextBlock Text="Preview" FontSize="17" FontWeight="SemiBold" Foreground="#202124"/>

						<Border Width="160" Height="160" CornerRadius="12" Background="#f8f9fa"
								BorderBrush="#e0e0e0" BorderThickness="1" HorizontalAlignment="Center">
							<Grid>
								<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
									<TextBlock Text="🎵" FontSize="42" Foreground="#bdc1c6"/>
									<TextBlock Text="Album Art" FontSize="12" Foreground="#bdc1c6" FontWeight="Medium"/>
								</StackPanel>
								<Image Source="{Binding CurrentTrack.AlbumArt}" Stretch="UniformToFill"/>
							</Grid>
						</Border>

						<StackPanel Spacing="6" HorizontalAlignment="Center">
							<TextBlock Text="{Binding CurrentTrack.Title, FallbackValue='Ready to download...'}"
									   FontSize="14" FontWeight="SemiBold" Foreground="#202124"
									   TextWrapping="Wrap" MaxWidth="180" TextAlignment="Center"/>

							<TextBlock Text="{Binding CurrentTrack.Artist, FallbackValue='Enter a URL above'}"
									   FontSize="13" Foreground="#5f6368"
									   TextWrapping="Wrap" MaxWidth="180" TextAlignment="Center"/>

							<TextBlock Text="{Binding CurrentTrack.Album}" FontSize="12" Foreground="#80868b"
									   IsVisible="{Binding CurrentTrack.Album, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
									   TextWrapping="Wrap" MaxWidth="180" TextAlignment="Center"/>
						</StackPanel>

						<Border Background="#f8f9fa" CornerRadius="6" Padding="8" HorizontalAlignment="Center">
							<StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
								<Border Width="40" Height="30" CornerRadius="3" Background="#ffffff"
										BorderBrush="#e0e0e0" BorderThickness="1">
									<Grid>
										<TextBlock Text="📹" FontSize="12" Foreground="#bdc1c6"
												   HorizontalAlignment="Center" VerticalAlignment="Center"/>
										<Image Source="{Binding CurrentTrack.Thumbnail}" Stretch="UniformToFill"/>
									</Grid>
								</Border>
								<TextBlock Text="Thumbnail" FontSize="11" Foreground="#80868b"/>
							</StackPanel>
						</Border>

						<Border Background="#e8f0fe" CornerRadius="20" Padding="12,6" HorizontalAlignment="Center" Margin="0,8,0,0"
								IsVisible="{Binding CurrentTrack.AlbumArt, Converter={x:Static ObjectConverters.IsNotNull}}">
							<TextBlock Text="{Binding CurrentTrack.HasRealAlbumArt, Converter={x:Static converters:BoolToAlbumArtStatusConverter.Instance}}"
									   FontSize="11" FontWeight="Medium" Foreground="#1a73e8"/>
						</Border>

						<StackPanel IsVisible="{Binding IsDownloading}" Spacing="10">
							<Grid>
								<TextBlock Text="Downloading..." FontSize="13" Foreground="#5f6368"/>
								<TextBlock Text="{Binding DownloadProgress, StringFormat='{}{0:0}%'}"
										   FontSize="13" FontWeight="Medium" Foreground="#4285f4" HorizontalAlignment="Right"/>
							</Grid>
							<Border Background="#f1f3f4" Height="8" CornerRadius="4">
								<Border CornerRadius="4" HorizontalAlignment="Left" Background="#4285f4"
										Width="{Binding DownloadProgress, Converter={x:Static converters:PercentageToWidthConverter.Instance}}"/>
							</Border>
						</StackPanel>
					</StackPanel>
				</Border>

				<Border Grid.Column="2" Classes="card" Padding="20">
					<StackPanel Spacing="16">
						<TextBlock Text="Status" FontSize="17" FontWeight="SemiBold" Foreground="#202124"/>

						<Border Background="#f8f9fa" CornerRadius="8" BorderBrush="#e0e0e0" BorderThickness="1" MinHeight="200">
							<ScrollViewer Padding="16" VerticalScrollBarVisibility="Auto">
								<TextBlock Text="{Binding StatusText}" TextWrapping="Wrap" FontSize="13"
										   Foreground="#3c4043" LineHeight="20"/>
							</ScrollViewer>
						</Border>
					</StackPanel>
				</Border>

				<Border Grid.Column="4" Classes="card" Padding="20">
					<StackPanel Spacing="16">
						<Grid>
							<TextBlock Text="Console" FontSize="17" FontWeight="SemiBold" Foreground="#202124"/>
							<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
								<Button Content="Copy" Command="{Binding CopyOutputCommand}" Classes="secondary" Padding="8,6" FontSize="12"/>
								<Button Content="Clear" Command="{Binding ClearLogCommand}" Classes="secondary" Padding="8,6" FontSize="12"/>
							</StackPanel>
						</Grid>

						<Border Background="#1a1a1a" CornerRadius="8" MinHeight="200">
							<ScrollViewer Name="CliOutput" Padding="16" VerticalScrollBarVisibility="Auto"
										  ScrollChanged="CliOutput_ScrollChanged">
								<SelectableTextBlock Text="{Binding CliOutput}" TextWrapping="Wrap"
												   FontFamily="JetBrains Mono, Consolas, monospace" FontSize="12"
												   Foreground="#34d399" LineHeight="18"/>
							</ScrollViewer>
						</Border>
					</StackPanel>
				</Border>
			</Grid>

			<Border Grid.Row="5" Background="#f1f3f4" CornerRadius="8" Padding="18" Margin="0,24,0,0">
				<StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="14">
					<TextBlock Text="📁 Downloads:" FontSize="13" Foreground="#5f6368"/>
					<TextBlock Text="{Binding DownloadFolder}" FontSize="13" FontWeight="Medium"
							   Foreground="#4285f4" TextTrimming="CharacterEllipsis" MaxWidth="320"/>
					<Button Content="Open Folder" Command="{Binding OpenFolderCommand}"
							Classes="secondary" Padding="14,10" FontSize="12"/>
				</StackPanel>
			</Border>
		</Grid>
	</Window>